<!DOCTYPE html>
<html>
	<head>
		<span class="version">v0.01750</span>
		<script src="http://media.twiliocdn.com/sdk/rtc/js/ip-messaging/v0.8/twilio-ip-messaging.min.js"></script>
		<link rel="shortcut icon" href="http://www.twilio.com/marketing/bundles/marketing/img/favicons/favicon.ico">
        <script src="./jquery-1.12.4.min.js"></script>
        <title>Chat-Program</title>
        <link rel="stylesheet" href="./BootStrap/bootstrap.css">
		<link rel="stylesheet" href="./BootStrap/bootstrap.min.js">
        <script>window.$ = window.jQuery = require('./jquery-1.12.4.min.js');</script>
        <style>
			.version {
				position: absolute;
				top: 5px;
				z-index: 6;
			}
            body {
                overflow-x: hidden;
				overflow-y: auto;
            }
			#btn {
				position: absolute;
				left: 5px;
				top: 5px;
				width: 50px;
				height: 50px;
				cursor: pointer;
			}
			#ln1 { position: relative; top: 7px; }
			#ln2 { position: relative;}
			#ln3 { position: relative; top: -7px;}
			#user-settings {
				display: inline-block;
				left: -250px;
				position: absolute;
				height: 100%;
				width: 250px;
				text-align: center;
				background-color: black;
				color: white;
				overflow: hidden;
				z-index: 3;
			}
            #inside {
                position: absolute;
                width: 100%;
                height: 100%;
                background-image: url('./images/bg.png');
				background-position: bottom;
				background-size: cover;
            }
            #server-text {
                background-color: grey;
                color: white;
                overflow: auto;
                text-overflow: ellipsis;
				border-color: transparent;
				border-radius: 2px;
                position: absolute;
                top: 5%;
                left: 5%;
                width: 90%;
                min-width: 10%;
                height: 80%;
                min-height: 5%;
            }
            #username {
                width: 250px;
            }
            #user {
                position: absolute;
                left: 5%;
            }
            #user-input {
                position: absolute;
                top: 85%;
				left: 5%;
                margin-left: auto;
                margin-right: auto;
                width: 85%;
            }
			#user-input_input {
				position: relative;
				width: 85%;
			}
			#user-input_button {
				position: relative;
				right: 5px;
			}
			#start-line {
				position: absolute;
				top: 2%;
			}
			input {
				color: grey;
			}
			hr {
				width: 550px;
			    display: block;
			    margin-top: 0.5em;
			    margin-bottom: 0.5em;
			    margin-left: auto;
			    margin-right: auto;
			    border-style: inset;
			    border-width: 1px;
			}
			a {
				cursor: pointer;
			}
        </style>
        <script>
			var interval = setInterval(function(){
				val = $("#server-text").value;
				$.get("http://149.56.143.36/Chat-Program/chat.asp", function(data, status) {
			        if(data === val)
						return;
					var br = document.createElement("br");
					$("#server-text").vaue = data;
			    });
			}, 1500);
			$(document).ready(function() {
				userSettings = false;
				$('#btn').hover(function(){
					$("#ln1").stop(true, false).animate({top: "20px" }, 150).css({ WebkitTransform: 'rotate(' + 45 + 'deg)'});
					$("#ln3").stop(true, false).animate({top: "-20px" }, 150).css({ WebkitTransform: 'rotate(' + -45 + 'deg)'});
				});
				$('#btn').mouseleave(function() {
					$("#ln1").stop(true, false).css({ WebkitTransform: 'rotate(' + 0 + 'deg)'}, 750).animate({top: "7px" }, 550);
					$("#ln3").stop(true, false).css({ WebkitTransform: 'rotate(' + 0 + 'deg)'}, 750).animate({top: "-7px" }, 550);
				});
				$("#btn").click(function() { userSettings = true; $("#user-settings").animate({ left: "0px" }, 750, function() { }); });
				$("#user-settings").mouseleave(function() {
					userSettings = false;
					$("#user-settings").animate({ left: "-250px" }, 750, function() { });
				});
			});
            document.onkeydown = checkKey;

			function addNewText() {
				if(document.getElementById("user-input_input").value === "")
					return;
                name = document.getElementById("user-name").value;
                if(name === "") {
                    name = "Guest";
					document.getElementById("user-name").value = "Guest";
				}
                var br = document.createElement("br");
                var span = document.createElement("span");
                var node = document.createTextNode(name + ": " + document.getElementById("user-input_input").value);
                span.appendChild(node);
                document.getElementById("server-text").appendChild(br);
                document.getElementById("server-text").appendChild(span);

                document.getElementById("user-input_input").value = "";
            }

            function checkKey(key) {
				if(key.code !== "enter" && key.keyCode != 13)
					return;
				if(userSettings == true) {
					userSettings = false;
					return $("#user-settings").animate({ left: "-250px" }, 750, function() { });
				}
                addNewText();
            }
        </script>
    </head>
    <body>
        <div id="inside">
			<a id="btn" onclick="$('#user-settings').animate({ left: '0px' }, 750, function() {});">
				<img id="ln1" src="./images/line.png">
				<img id="ln2" src="./images/line.png">
				<img id="ln3" src="./images/line.png">
			</a>
			<span id="user-settings">
				<a onclick="$('#user-settings').animate({ left: '-250px' }, 750, function() {});"><p><==</p></a>
				<p>User-Settings</b><hr>
				<p>User-Name: <input id="user-name"></input></p>
			</span>
            <span id="server-text">Welcome to the start of the text channel, <span id="who">guest</span> <hr id="start-line"></span>
            <div id="user-input">
                <input id="user-input_input"></input>
                <button id="user-input_button" onclick="addNewText()" class="btn btn-default" type="button">Enter</button>
            </div>
        </div>
    </body>
</html>
